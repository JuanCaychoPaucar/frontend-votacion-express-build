(this["webpackJsonpfrontend-votacion-express-build"]=this["webpackJsonpfrontend-votacion-express-build"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n(21),o=n.n(r),s=n(25),i=n(39),l=n(15),d=n(8),u=n(26),j=n(7),b=n(18),m=n(22),O=n.n(m),p=n(12),h=n.n(p),x=n(16),f="http://localhost:5000",g=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/iniciarSesion"),{method:"POST",body:JSON.stringify({dni:t,correo:n}),headers:{"Content-type":"application/json"}});case 2:return c=e.sent,e.next=5,c.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=Object(a.createContext)(),v=function(e){var t=e.history,n=Object(a.useContext)(N),r=n.iniciarSesion,o=(n.usuarioTipo,Object(a.useState)({dni:"",email:""})),s=Object(b.a)(o,2),i=s[0],l=s[1],d=function(e){l(Object(j.a)(Object(j.a)({},i),{},Object(u.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("div",{className:"container contenedor-login bg-light",children:Object(c.jsx)("div",{className:"row justify-content-md-center h-100",children:Object(c.jsx)("div",{className:"col-lg-6 col-md-6 my-auto",children:Object(c.jsxs)("form",{className:"formulario",onSubmit:function(e){e.preventDefault(),g(i.dni,i.email).then((function(e){e.ok?(r(e.content),t.push("/elector/votacion")):O.a.fire({icon:"error",title:"Oops...",text:e.message})}))},children:[Object(c.jsx)("h2",{className:"text-center mb-5",children:"LOGIN"}),Object(c.jsxs)("div",{className:"mb-3",children:[Object(c.jsx)("label",{htmlFor:"inputCorreo",className:"form-label font-weight-bold",children:"DNI"}),Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"DNI",name:"dni",value:i.dni,onChange:d})]}),Object(c.jsxs)("div",{className:"mb-3",children:[Object(c.jsx)("label",{htmlFor:"inputPassword",className:"form-label font-weight-bold",children:"Email"}),Object(c.jsx)("input",{type:"email",className:"form-control",placeholder:"Email",name:"email",value:i.email,onChange:d})]}),Object(c.jsxs)("div",{className:"mb-3 row justify-content-between",children:[Object(c.jsx)("div",{className:" col col-md-5 d-grid gap-2",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Aceptar"})}),Object(c.jsx)("div",{className:" col col-md-5 d-grid gap-2",children:Object(c.jsx)("button",{type:"button",className:"btn btn-danger btn-block",onClick:function(){l({dni:"",email:""})},children:"Cancelar"})})]})]})})})})},C=function(){return Object(c.jsx)(d.d,{children:Object(c.jsx)(d.b,{path:"/auth",component:v})})},I=(n(62),function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"contenedor-imagen-principal"}),Object(c.jsx)("div",{className:"container centrar",children:Object(c.jsxs)("div",{className:"justify-content-md-center h-100",children:[Object(c.jsx)("h1",{className:"text-danger text-center bienvenido",children:"BIENVENIDO A LAS VOTACIONES"}),Object(c.jsx)("br",{}),Object(c.jsxs)("div",{className:"row d-flex justify-content-around",children:[Object(c.jsx)(l.b,{className:"col col-md-5 btn btn-success",to:"/auth",children:"Login"}),Object(c.jsx)(l.b,{className:"col col-md-5 btn btn-danger",to:"/elector/registro",children:"Registro"})]})]})})]})}),S=function(){return Object(c.jsx)(d.d,{children:Object(c.jsx)(d.b,{path:"/",component:I})})},y=Object(a.createContext)(),k=function(e,t){switch(t.type){case"SELECCIONAR_PRESIDENTE":return Object(j.a)(Object(j.a)({},e),{},{votoPresidencial:t.data.partidoID});case"SELECCIONAR_PARTIDO":return Object(j.a)(Object(j.a)({},e),{},{partido:t.data.partidoID});case"PRIMER_CONGRESISTA":return Object(j.a)(Object(j.a)({},e),{},{primerCongresista:t.data.numero});case"SEGUNDO_CONGRESISTA":return Object(j.a)(Object(j.a)({},e),{},{segundoCongresista:t.data.numero});case"LIMPIAR_VOTACION":return Object(j.a)(Object(j.a)({},e),{},{votoPresidencial:"",electorDNI:"",partido:"",primerCongresista:"",segundoCongresista:""})}},E=function(e){var t=Object(a.useContext)(N).usuarioDNI,n=Object(a.useReducer)(k,{votoPresidencial:"",electorDNI:t,partido:"",primerCongresista:"",segundoCongresista:""}),r=Object(b.a)(n,2),o=r[0],s=r[1];return Object(c.jsx)(y.Provider,{value:{votoPresidencial:o.votoPresidencial,electorDNI:o.electorDNI,partido:o.partido,primerCongresista:o.primerCongresista,segundoCongresista:o.segundoCongresista,seleccionarPresidente:function(e){s({type:"SELECCIONAR_PRESIDENTE",data:{partidoID:e}})},seleccionarPartido:function(e){s({type:"SELECCIONAR_PARTIDO",data:{partidoID:e}})},ingresoPrimerCongresista:function(e){s({type:"PRIMER_CONGRESISTA",data:{numero:e}})},ingresoSegundoCongresista:function(e){s({type:"SEGUNDO_CONGRESISTA",data:{numero:e}})},limpiarVotacion:function(){s({type:"LIMPIAR_VOTACION"})}},children:e.children})},_=function(e){var t=e.path,n=e.componente,r=Object(a.useContext)(N),o=r.autenticado,s=r.cargando,i=r.usuarioTipo;return s?Object(c.jsx)("h1",{className:"display-4",children:"Cargando..."}):o&&2===i?Object(c.jsx)(d.b,{path:t,component:n}):Object(c.jsx)(d.a,{to:"/"})},w=(n(63),function(){var e=Object(x.a)(h.a.mark((function e(t,n){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/registrar"),{method:"POST",body:JSON.stringify({elector_dni:t,elector_email:n}),headers:{"Content-type":"application/json"}});case 2:return c=e.sent,e.next=5,c.json();case 5:return(a=e.sent).status=c.status,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),R=function(){var e=Object(a.useState)({dni:"",email:""}),t=Object(b.a)(e,2),n=t[0],r=t[1],o=function(e){r(Object(j.a)(Object(j.a)({},n),{},Object(u.a)({},e.target.name,e.target.value)))},s=function(){r({dni:"",email:""})};return Object(c.jsx)("div",{className:"container contenedor-login bg-light",children:Object(c.jsx)("div",{className:"row justify-content-md-center h-100",children:Object(c.jsx)("div",{className:"col-lg-6 col-md-6 my-auto",children:Object(c.jsxs)("form",{className:"formulario",onSubmit:function(e){e.preventDefault(),console.log(n.dni),console.log(n.email),w(n.dni,n.email).then((function(e){e.ok?(O.a.fire({icon:"success",title:"OK",text:e.message}),s()):O.a.fire({icon:"error",title:"Oops...",text:e.message})}))},children:[Object(c.jsx)("h2",{className:"text-center mb-5",children:"REGISTRO"}),Object(c.jsxs)("div",{className:"mb-3",children:[Object(c.jsx)("label",{htmlFor:"inputCorreo",className:"form-label font-weight-bold",children:"DNI"}),Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"DNI",name:"dni",value:n.dni,onChange:o})]}),Object(c.jsxs)("div",{className:"mb-3",children:[Object(c.jsx)("label",{htmlFor:"inputPassword",className:"form-label font-weight-bold",children:"Email"}),Object(c.jsx)("input",{type:"email",className:"form-control",placeholder:"Email",name:"email",value:n.email,onChange:o})]}),Object(c.jsxs)("div",{className:"mb-3 row justify-content-between",children:[Object(c.jsx)("div",{className:" col col-md-5 d-grid gap-2",children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Aceptar"})}),Object(c.jsx)("div",{className:" col col-md-5 d-grid gap-2",children:Object(c.jsx)("button",{type:"button",className:"btn btn-danger btn-block",onClick:s,children:"Cancelar"})})]})]})})})})},D=n(46),P=n(76),T=n(77),A=n(75),L=function(){var e=Object(a.useContext)(N),t=e.usuarioDNI,n=e.cerrarSesion;return Object(c.jsxs)(P.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(c.jsx)(P.a.Brand,{href:"#home",children:"VOTACION"}),Object(c.jsx)(P.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(c.jsxs)(P.a.Collapse,{id:"responsive-navbar-nav",children:[Object(c.jsxs)(T.a,{className:"mr-auto",children:[Object(c.jsx)(T.a.Link,{href:"#features",children:"Features"}),Object(c.jsx)(T.a.Link,{href:"#pricing",children:"Pricing"}),Object(c.jsxs)(A.a,{title:"Dropdown",id:"collasible-nav-dropdown",children:[Object(c.jsx)(A.a.Item,{href:"#action/3.1",children:"Action"}),Object(c.jsx)(A.a.Item,{href:"#action/3.2",children:"Another action"}),Object(c.jsx)(A.a.Item,{href:"#action/3.3",children:"Something"}),Object(c.jsx)(A.a.Divider,{}),Object(c.jsx)(A.a.Item,{href:"#action/3.4",children:"Separated link"})]})]}),Object(c.jsxs)(T.a,{children:[Object(c.jsxs)(P.a.Text,{className:"mr-5",children:["Bienvenido : ",Object(c.jsx)("span",{className:"font-weight-bold",children:t})]}),Object(c.jsx)(P.a.Text,{className:"mr-2",children:"Cerrar sesion "}),Object(c.jsx)(l.b,{className:"",to:"/",onClick:function(){n()},children:Object(c.jsx)(P.a.Text,{className:"text-danger",children:Object(c.jsx)(D.a,{icon:"power-off"})})})]})]})]})},F=function(e){var t=e.p,n=Object(a.useContext)(y),r=n.seleccionarPresidente,o=n.votoPresidencial;return Object(c.jsxs)("tr",{className:"partido",children:[Object(c.jsx)("td",{className:"partido-nombre",children:t.partido_nombre}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{className:"rounded mx-auto d-block logo-partido ".concat(o===t.partido_id?"seleccionado":""),style:{backgroundImage:"url(".concat(t.partido_img_partido,")"),backgroundSize:"cover"},onClick:function(){r(t.partido_id)}})}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{className:"rounded mx-auto d-block logo-partido ".concat(o===t.partido_id?"seleccionado":""),style:{backgroundImage:"url(".concat(t.partido_img_candidato,")"),backgroundSize:"cover"},onClick:function(){r(t.partido_id)}})})]})},G=function(e){var t=e.partidos;return Object(c.jsx)("table",{className:"table table-bordered",children:Object(c.jsx)("tbody",{children:t.map((function(e){return Object(c.jsx)(F,{p:e},e.partido_id)}))})})},V=function(e){var t=e.partidos;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{className:"text-center",children:"PRESIDENTE"}),Object(c.jsx)("div",{className:"table-responsive-sm",children:Object(c.jsx)(G,{partidos:t})})]})},J=function(e){var t=e.p,n=Object(a.useContext)(y),r=n.partido,o=n.seleccionarPartido,s=n.ingresoPrimerCongresista,i=n.ingresoSegundoCongresista,l=n.primerCongresista,d=n.segundoCongresista;return Object(c.jsxs)("tr",{className:"partido",children:[Object(c.jsx)("td",{className:"partido-nombre",children:t.partido_nombre}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{className:"rounded mx-auto d-block logo-partido ".concat(r===t.partido_id?"seleccionado":""),style:{backgroundImage:"url(".concat(t.partido_img_partido,")"),backgroundSize:"cover"},onClick:function(){o(t.partido_id)}})}),Object(c.jsx)("td",{children:Object(c.jsx)("input",{className:"congresista-numero mx-auto d-block",type:"text",name:"congresista_1",value:r===t.partido_id?l:"",onChange:function(e){s(e.target.value)},onClick:function(){o(t.partido_id)}})}),Object(c.jsx)("td",{children:Object(c.jsx)("input",{className:"congresista-numero mx-auto d-block",type:"text",name:"congresista_2",value:r===t.partido_id?d:"",onChange:function(e){i(e.target.value)},onClick:function(){o(t.partido_id)}})})]})},B=function(e){var t=e.partidos;return Object(c.jsx)("table",{className:"table table-bordered",children:Object(c.jsx)("tbody",{children:t.map((function(e){return Object(c.jsx)(J,{p:e},e.partido_id)}))})})},z=function(e){var t=e.partidos;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{className:"text-center",children:"CONGRESO"}),Object(c.jsx)("div",{className:"table-responsive-sm",children:Object(c.jsx)(B,{partidos:t})})]})},M=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/partido"));case 2:return t=e.sent,e.next=5,t.json();case 5:return(n=e.sent).status=t.status,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(x.a)(h.a.mark((function e(t,n,c,a,r){var o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/voto"),{method:"POST",body:JSON.stringify({voto_presidencial:t,voto_congresal:{partido:n,primer_congresista:c,segundo_congresista:a}}),headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(r)}});case 2:return o=e.sent,e.next=5,o.json();case 5:return(s=e.sent).status=o.status,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,n,c,a,r){return e.apply(this,arguments)}}(),U=(n(67),function(e){var t=e.history,n=Object(a.useState)([]),r=Object(b.a)(n,2),o=r[0],s=r[1],i=Object(a.useContext)(y),l=i.votoPresidencial,d=i.partido,u=i.primerCongresista,j=i.segundoCongresista,m=i.limpiarVotacion,p=Object(a.useContext)(N),f=p.token,g=p.cerrarSesion;console.log("TOKEN",f);var v=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M().then((function(e){s(e.content)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){v()}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(L,{}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col col-md-5 mt-4",children:Object(c.jsx)(V,{partidos:o})}),Object(c.jsx)("div",{className:"col col-md-7 mt-4",children:Object(c.jsx)(z,{partidos:o})})]}),Object(c.jsx)("div",{className:"mt-5 row justify-content-md-center justify-content-sm-center justify-content-center h-100",children:Object(c.jsx)("form",{onSubmit:function(e){e.preventDefault(),K(l,d,u,j,f).then((function(e){e.ok?O.a.fire({icon:"success",title:"OK",text:e.message}).then((function(e){e&&(m(),g(),t.push("/"))})):O.a.fire({icon:"error",title:"Oops...",text:e.message})}))},children:Object(c.jsx)("button",{className:"btn btn-success btn-lg",type:"submit",children:"PROCESAR VOTACION"})})})]})]})}),q=function(){return Object(c.jsx)(E,{children:Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{path:"/elector/registro",component:R}),Object(c.jsx)(_,{path:"/elector/votacion",componente:U})]})})},H=function(){return Object(c.jsx)(l.a,{children:Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{path:"/auth",component:C}),Object(c.jsx)(d.b,{path:"/elector",component:q}),Object(c.jsx)(d.b,{path:"/",component:S})]})})},Q=function(e,t){switch(t.type){case"INICIAR_SESION":return Object(j.a)(Object(j.a)({},e),{},{usuarioDNI:t.data.elector_dni,usuarioTipo:t.data.elector_tipo,autenticado:!0,cargando:!1,token:t.data.token});case"CERRAR_SESION":return Object(j.a)(Object(j.a)({},e),{},{usuarioDNI:null,usuarioTipo:null,autenticado:!1,cargando:!0,token:null})}},W=function(e){var t=Object(a.useReducer)(Q,{autenticado:!1,usuarioDNI:!1,usuarioTipo:null,token:null,cargando:!0}),n=Object(b.a)(t,2),r=n[0],o=n[1];return Object(c.jsx)(N.Provider,{value:{usuarioDNI:r.usuarioDNI,usuarioTipo:r.usuarioTipo,token:r.token,autenticado:r.autenticado,cargando:r.cargando,iniciarSesion:function(e){var t=e.split(".")[1],n=window.atob(t),c=JSON.parse(n);o({type:"INICIAR_SESION",data:Object(j.a)(Object(j.a)({},c),{},{token:e})})},cerrarSesion:function(){o({type:"CERRAR_SESION"})}},children:e.children})},X=(n(68),function(){return s.b.add(i.a,i.b,i.c),Object(c.jsx)(W,{children:Object(c.jsx)(H,{})})});o.a.render(Object(c.jsx)(X,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.5154c0d1.chunk.js.map